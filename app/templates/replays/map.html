{%- macro building_status(value) -%}
    {# Takes a bit and returns a class to apply if that bit is true. #}
    {{ "destroyed" if not value or value == "0" else "" }}
{% endmacro %}


<div id="hover_box">
	<span id="building_location"></span>
	<span id="building_tier"></span>
	<span id="building_type"></span>
	<div id="building_team"></div>
</div>
<div style="background:url({{ url_for('static', filename='images/minimap.png') }}) #333" id="map">

	<div class="ancient dire{{ ' destroyed' if replay.good_guys_win }}"></div>

	<div class="tower dire top tier_1 {{ building_status(building_statuses[1][10]) }}"></div>
	<div class="tower dire top tier_2 {{ building_status(building_statuses[1][9]) }}"></div>
	<div class="tower dire top tier_3 {{ building_status(building_statuses[1][8]) }}"></div>
	<div class="tower dire mid tier_1 {{ building_status(building_statuses[1][7]) }}"></div>
	<div class="tower dire mid tier_2 {{ building_status(building_statuses[1][6]) }}"></div>
	<div class="tower dire mid tier_3 {{ building_status(building_statuses[1][5]) }}"></div>
	<div class="tower dire bot tier_1 {{ building_status(building_statuses[1][4]) }}"></div>
	<div class="tower dire bot tier_2 {{ building_status(building_statuses[1][3]) }}"></div>
	<div class="tower dire bot tier_3 {{ building_status(building_statuses[1][2]) }}"></div>
	<div class="tower dire anc bot {{ building_status(building_statuses[1][1]) }}"></div>
	<div class="tower dire anc top {{ building_status(building_statuses[1][0]) }}"></div>

	<div class="barracks dire top melee {{ building_status(building_statuses[3][5]) }}"></div>
	<div class="barracks dire top ranged {{ building_status(building_statuses[3][4]) }}"></div>
	<div class="barracks dire mid melee {{ building_status(building_statuses[3][3]) }}"></div>
	<div class="barracks dire mid ranged {{ building_status(building_statuses[3][2]) }}"></div>
	<div class="barracks dire bot melee {{ building_status(building_statuses[3][1]) }}"></div>
	<div class="barracks dire bot ranged {{ building_status(building_statuses[3][0]) }}"></div>

	<div class="ancient radiant {{ 'destroyed' if not replay.good_guys_win }}"></div>

	<div class="tower radiant top tier_1 {{ building_status(building_statuses[0][10]) }}"></div>
	<div class="tower radiant top tier_2 {{ building_status(building_statuses[0][9]) }}"></div>
	<div class="tower radiant top tier_3 {{ building_status(building_statuses[0][8]) }}"></div>
	<div class="tower radiant mid tier_1 {{ building_status(building_statuses[0][7]) }}"></div>
	<div class="tower radiant mid tier_2 {{ building_status(building_statuses[0][6]) }}"></div>
	<div class="tower radiant mid tier_3 {{ building_status(building_statuses[0][5]) }}"></div>
	<div class="tower radiant bot tier_1 {{ building_status(building_statuses[0][4]) }}"></div>
	<div class="tower radiant bot tier_2 {{ building_status(building_statuses[0][3]) }}"></div>
	<div class="tower radiant bot tier_3 {{ building_status(building_statuses[0][2]) }}"></div>
	<div class="tower radiant anc bot {{ building_status(building_statuses[0][1]) }}"></div>
	<div class="tower radiant anc top {{ building_status(building_statuses[0][0]) }}"></div>

	<div class="barracks radiant top melee {{ building_status(building_statuses[2][5]) }}"></div>
	<div class="barracks radiant top ranged {{ building_status(building_statuses[2][4]) }}"></div>
	<div class="barracks radiant mid melee {{ building_status(building_statuses[2][3]) }}"></div>
	<div class="barracks radiant mid ranged {{ building_status(building_statuses[2][2]) }}"></div>
	<div class="barracks radiant bot melee {{ building_status(building_statuses[2][1]) }}"></div>
	<div class="barracks radiant bot ranged {{ building_status(building_statuses[2][0]) }}"></div>
</div>
