{% extends "layouts/standard.html" %}

{% block page_header %}
    <div class="page-header">
        <h1>Donate to Dotabank
            <small>02 Oct 2014</small>
        </h1>
    </div>
{% endblock %}

{% block content %}
    <p><strong>Thanks for your interest in donating!</strong> Dotabank has been running for over a year now and has
        always ran at-cost. In the interest of being transparent, here are the costs for running Dotabank over the past
        few months:</p>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>Month</th>
            <th>Outgoing</th>
            <th>Incoming</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>September 2014</td>
            <td>
                <ul>
                    <li>&dollar;88.10 USD (Amazon Web Services)</li>
                    <li>&pound;12.00 GBP (Bytemark Hosting)</li>
                </ul>
            </td>
            <td>&pound;5.71 GBP (Google Adsense)</td>
        </tr>
        <tr>
            <td>August 2014</td>
            <td>
                <ul>
                    <li>&dollar;104.45 USD (Amazon Web Services)</li>
                    <li>&pound;12.00 GBP (Bytemark Hosting)</li>
                </ul>
            </td>
            <td>&pound;6.13 GBP (Google Adsense)</td>
        </tr>
        <tr>
            <td>July 2014</td>
            <td>
                <ul>
                    <li>&dollar;162.75 USD (Amazon Web Services)</li>
                    <li>&pound;12.00 GBP (Bytemark Hosting)</li>
                </ul>
            </td>
            <td>&pound;8.04 GBP (Google Adsense)</td>
        </tr>
        </tbody>
    </table>

    <p>We are slowly working on monetization strategies, so we are able to offer users who wish to subscribe to
        Dotabank special features for doing so, but in the meantime anybody is welcome to donate to help cover the costs
        of the site.</p>

    <p>If you have any questions at all, feel free to e-mail <a href="mailto:{{ config['CONTACT_EMAIL']|escape_every_character|safe }}">{{ config['CONTACT_EMAIL']|escape_every_character|safe }}</a>.</p>

    <h2>Donate via Credit Card</h2>
    <p>Credit card donations are handled and processed by <a href="https://stripe.com">Stripe</a>.</p>
    {% block stripe_donate %}
        <form id="stripeDonationForm" action="{{ url_for("donate_stripe") }}" method="POST">
            <input type="hidden" name="stripeDonationToken" id="stripeDonationToken"/>
            <input type="hidden" name="stripeDonationAmountNormalized" id="stripeDonationAmountNormalized"/>

            <dl class="dl-horizontal">
                <dt>E-mail:</dt>
                <dd><input class="form-control" type="email" name="stripeDonationEmail" id="stripeDonationEmail" placeholder="E-mail address"/></dd>
                <dd>&nbsp;</dd>
                <dt>Amount:</dt>
                <dd>
                    <div class="input-group">
                        <input class="form-control" type="number" id="stripeDonationAmount" name="stripeDonationAmount" value="10.00" step="0.01"/>
                        <span class="input-group-btn" style="width:0px;"></span>
                        <select class="form-control" name="stripeDonationCurrency" id="stripeDonationCurrency">
                            <option value="USD">USD: United States Dollar</option>
                            <option value="GBP">GBP: British Pound</option>
                            <option value="EUR">EUR: Euro</option>
                            <option value="AED">AED: United Arab Emirates Dirham</option>
                            <option value="AFN">AFN: Afghan Afghani*</option>
                            <option value="ALL">ALL: Albanian Lek</option>
                            <option value="AMD">AMD: Armenian Dram</option>
                            <option value="ANG">ANG: Netherlands Antillean Gulden</option>
                            <option value="AOA">AOA: Angolan Kwanza*</option>
                            <option value="ARS">ARS: Argentine Peso*</option>
                            <option value="AUD">AUD: Australian Dollar</option>
                            <option value="AWG">AWG: Aruban Florin</option>
                            <option value="AZN">AZN: Azerbaijani Manat</option>
                            <option value="BAM">BAM: Bosnia & Herzegovina Convertible Mark</option>
                            <option value="BBD">BBD: Barbadian Dollar</option>
                            <option value="BDT">BDT: Bangladeshi Taka</option>
                            <option value="BGN">BGN: Bulgarian Lev</option>
                            <option value="BIF">BIF: Burundian Franc</option>
                            <option value="BMD">BMD: Bermudian Dollar</option>
                            <option value="BND">BND: Brunei Dollar</option>
                            <option value="BOB">BOB: Bolivian Boliviano*</option>
                            <option value="BRL">BRL: Brazilian Real*</option>
                            <option value="BSD">BSD: Bahamian Dollar</option>
                            <option value="BWP">BWP: Botswana Pula</option>
                            <option value="BZD">BZD: Belize Dollar</option>
                            <option value="CAD">CAD: Canadian Dollar</option>
                            <option value="CDF">CDF: Congolese Franc</option>
                            <option value="CHF">CHF: Swiss Franc</option>
                            <option value="CLP">CLP: Chilean Peso*</option>
                            <option value="CNY">CNY: Chinese Renminbi Yuan</option>
                            <option value="COP">COP: Colombian Peso*</option>
                            <option value="CRC">CRC: Costa Rican Colón*</option>
                            <option value="CVE">CVE: Cape Verdean Escudo*</option>
                            <option value="CZK">CZK: Czech Koruna*</option>
                            <option value="DJF">DJF: Djiboutian Franc*</option>
                            <option value="DKK">DKK: Danish Krone</option>
                            <option value="DOP">DOP: Dominican Peso</option>
                            <option value="DZD">DZD: Algerian Dinar</option>
                            <option value="EEK">EEK: Estonian Kroon*</option>
                            <option value="EGP">EGP: Egyptian Pound</option>
                            <option value="ETB">ETB: Ethiopian Birr</option>
                            <option value="FJD">FJD: Fijian Dollar</option>
                            <option value="FKP">FKP: Falkland Islands Pound*</option>
                            <option value="GEL">GEL: Georgian Lari</option>
                            <option value="GIP">GIP: Gibraltar Pound</option>
                            <option value="GMD">GMD: Gambian Dalasi</option>
                            <option value="GNF">GNF: Guinean Franc*</option>
                            <option value="GTQ">GTQ: Guatemalan Quetzal*</option>
                            <option value="GYD">GYD: Guyanese Dollar</option>
                            <option value="HKD">HKD: Hong Kong Dollar</option>
                            <option value="HNL">HNL: Honduran Lempira*</option>
                            <option value="HRK">HRK: Croatian Kuna</option>
                            <option value="HTG">HTG: Haitian Gourde</option>
                            <option value="HUF">HUF: Hungarian Forint*</option>
                            <option value="IDR">IDR: Indonesian Rupiah</option>
                            <option value="ILS">ILS: Israeli New Sheqel</option>
                            <option value="INR">INR: Indian Rupee*</option>
                            <option value="ISK">ISK: Icelandic Króna</option>
                            <option value="JMD">JMD: Jamaican Dollar</option>
                            <option value="JPY">JPY: Japanese Yen</option>
                            <option value="KES">KES: Kenyan Shilling</option>
                            <option value="KGS">KGS: Kyrgyzstani Som</option>
                            <option value="KHR">KHR: Cambodian Riel</option>
                            <option value="KMF">KMF: Comorian Franc</option>
                            <option value="KRW">KRW: South Korean Won</option>
                            <option value="KYD">KYD: Cayman Islands Dollar</option>
                            <option value="KZT">KZT: Kazakhstani Tenge</option>
                            <option value="LAK">LAK: Lao Kip*</option>
                            <option value="LBP">LBP: Lebanese Pound</option>
                            <option value="LKR">LKR: Sri Lankan Rupee</option>
                            <option value="LRD">LRD: Liberian Dollar</option>
                            <option value="LSL">LSL: Lesotho Loti</option>
                            <option value="LTL">LTL: Lithuanian Litas</option>
                            <option value="LVL">LVL: Latvian Lats</option>
                            <option value="MAD">MAD: Moroccan Dirham</option>
                            <option value="MDL">MDL: Moldovan Leu</option>
                            <option value="MGA">MGA: Malagasy Ariary</option>
                            <option value="MKD">MKD: Macedonian Denar</option>
                            <option value="MNT">MNT: Mongolian Tögrög</option>
                            <option value="MOP">MOP: Macanese Pataca</option>
                            <option value="MRO">MRO: Mauritanian Ouguiya</option>
                            <option value="MUR">MUR: Mauritian Rupee*</option>
                            <option value="MVR">MVR: Maldivian Rufiyaa</option>
                            <option value="MWK">MWK: Malawian Kwacha</option>
                            <option value="MXN">MXN: Mexican Peso*</option>
                            <option value="MYR">MYR: Malaysian Ringgit</option>
                            <option value="MZN">MZN: Mozambican Metical</option>
                            <option value="NAD">NAD: Namibian Dollar</option>
                            <option value="NGN">NGN: Nigerian Naira</option>
                            <option value="NIO">NIO: Nicaraguan Córdoba*</option>
                            <option value="NOK">NOK: Norwegian Krone</option>
                            <option value="NPR">NPR: Nepalese Rupee</option>
                            <option value="NZD">NZD: New Zealand Dollar</option>
                            <option value="PAB">PAB: Panamanian Balboa*</option>
                            <option value="PEN">PEN: Peruvian Nuevo Sol*</option>
                            <option value="PGK">PGK: Papua New Guinean Kina</option>
                            <option value="PHP">PHP: Philippine Peso</option>
                            <option value="PKR">PKR: Pakistani Rupee</option>
                            <option value="PLN">PLN: Polish Złoty</option>
                            <option value="PYG">PYG: Paraguayan Guaraní*</option>
                            <option value="QAR">QAR: Qatari Riyal</option>
                            <option value="RON">RON: Romanian Leu</option>
                            <option value="RSD">RSD: Serbian Dinar</option>
                            <option value="RUB">RUB: Russian Ruble</option>
                            <option value="RWF">RWF: Rwandan Franc</option>
                            <option value="SAR">SAR: Saudi Riyal</option>
                            <option value="SBD">SBD: Solomon Islands Dollar</option>
                            <option value="SCR">SCR: Seychellois Rupee</option>
                            <option value="SEK">SEK: Swedish Krona</option>
                            <option value="SGD">SGD: Singapore Dollar</option>
                            <option value="SHP">SHP: Saint Helenian Pound*</option>
                            <option value="SLL">SLL: Sierra Leonean Leone</option>
                            <option value="SOS">SOS: Somali Shilling</option>
                            <option value="SRD">SRD: Surinamese Dollar*</option>
                            <option value="STD">STD: São Tomé and Príncipe Dobra</option>
                            <option value="SVC">SVC: Salvadoran Colón*</option>
                            <option value="SZL">SZL: Swazi Lilangeni</option>
                            <option value="THB">THB: Thai Baht</option>
                            <option value="TJS">TJS: Tajikistani Somoni</option>
                            <option value="TOP">TOP: Tongan Paʻanga</option>
                            <option value="TRY">TRY: Turkish Lira</option>
                            <option value="TTD">TTD: Trinidad and Tobago Dollar</option>
                            <option value="TWD">TWD: New Taiwan Dollar</option>
                            <option value="TZS">TZS: Tanzanian Shilling</option>
                            <option value="UAH">UAH: Ukrainian Hryvnia</option>
                            <option value="UGX">UGX: Ugandan Shilling</option>
                            <option value="UYU">UYU: Uruguayan Peso*</option>
                            <option value="UZS">UZS: Uzbekistani Som</option>
                            <option value="VEF">VEF: Venezuelan Bolívar*</option>
                            <option value="VND">VND: Vietnamese Đồng</option>
                            <option value="VUV">VUV: Vanuatu Vatu</option>
                            <option value="WST">WST: Samoan Tala</option>
                            <option value="XAF">XAF: Central African Cfa Franc</option>
                            <option value="XCD">XCD: East Caribbean Dollar</option>
                            <option value="XOF">XOF: West African Cfa Franc*</option>
                            <option value="XPF">XPF: Cfp Franc*</option>
                            <option value="YER">YER: Yemeni Rial</option>
                            <option value="ZAR">ZAR: South African Rand</option>
                            <option value="ZMW">ZMW: Zambian Kwacha</option>
                        </select>
                    </div>
                </dd>
                <dd>&nbsp;</dd>
                <dd><button class="btn btn-primary text-center" id="stripeDonateButton">Donate</button></dd>
            </dl>
        </form>
    {% endblock %}

    <em>Other donation methods coming soon.</em>
{% endblock %}

{% block scripts %}
    {{ super() }}

    <!-- Donations via Stripe -->
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script>
        var handler = StripeCheckout.configure({
            key: '{{ config['STRIPE_DEBUG_PUBLISHABLE_KEY'] if config['DEBUG'] else config['STRIPE_PROD_PUBLISHABLE_KEY'] }}',
{#            image: '/square-image.png',#}
            token: function(token) {
              // Use the token to create the charge with a server-side script.
              // You can access the token ID with `token.id`
                jQuery('#stripeDonationToken').val(token.id);
                jQuery('#stripeDonationForm').submit();
            }
          });

        var zero_decimal_currencies = [
            'BIF',
            'CLP',
            'DJF',
            'GNF',
            'JPY',
            'KMF',
            'KRW',
            'MGA',
            'PYG',
            'RWF',
            'VUV',
            'XAF',
            'VND',
            'XOF',
            'XPF'
        ];

        document.getElementById('stripeDonateButton').addEventListener('click', function(e) {
            // Open Checkout with further options
            var donation_amount = parseFloat(jQuery('#stripeDonationAmount').val()),
                donation_currency = jQuery('#stripeDonationCurrency').val(),
                donation_email = jQuery('#stripeDonationEmail').val(),
                donation_amount_normalized = 0; // Convert dollars to cents in relevant currencies

            if (zero_decimal_currencies.indexOf(donation_currency) === -1) {
                donation_amount_normalized = donation_amount * 100;
            }
            else {
                donation_amount_normalized = donation_amount;
            }
            jQuery('#stripeDonationAmountNormalized').val(donation_amount_normalized);

            handler.open({
                name: 'Dotabank',
                description: 'Donation',
                amount: donation_amount_normalized,
                currency: donation_currency,
                email: donation_email,
                panelLabel: 'Donate'
            });
            e.preventDefault();
          });
    </script>
{% endblock %}

{% block top_ad %}
    {# Remove ads on this page #}
{% endblock %}

{% block bottom_ad %}
    {# Remove ads on this page #}
{% endblock %}