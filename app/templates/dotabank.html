{% extends "layout.html" %}

{% block content %}
    <div class="jumbotron">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <p>
                        Dotabank archives replays of your Dota 2 matches. Valve can't keep replays for every match ever
                        played available to download, Dotabank can - by only downloading and storing matches which users
                        request, and we keep them available to download for free, forever!
                    </p>
                </div>
                <div class="col-sm-6">
                    <ul>
                        <li>Easy replay archiving - just input a match id</li>
                        <li>Unlimited & fast downloads</li>
                        <li>Automatically archive matches <sup><span class="label label-premium">Premium</span></sup></li>
                        <li>Other features coming soonâ€¦ <sup><span class="label label-premium">Premium</span></sup></li>
                    </ul>
                </div>
            </div>

            <hr>

            <div class="row">
                <div class="col-sm-6">
                    <dl class="dl-horizontal">
                        <dt>Replays in database</dt>
                        <dd>{{ total_replays }}</dd>
                        <dt>Available to download</dt>
                        <dd>{{ total_replays_downloadable }}</dd>
                    </dl>
                </div>
                <div class="col-sm-6">
                    <dl class="dl-horizontal">
                        <dt>Total users</dt>
                        <dd>{{ total_users }}</dd>
                        <dt>Downloads fulfilled</dt>
                        <dd>{{ total_downloads_processed }}</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <h1>Latest added</h1>
            <table class="table table-condensed table-striped">
                <thead>
                    <tr>
                        <td>Replay ID</td>
                        <td>State</td>
                        <td>Time</td>
                    </tr>
                </thead>
                <tbody>
                    {% for replay in last_added_replays %}
                        <tr>
                            <td><a href="{{ url_for("replays.replay", _id=replay.id) }}">{{ replay.id }}</a></td>
                            <td>{{ replay.state }}</td>
                            <td>{{ replay.added_to_site_time|datetime_to_datestring }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-sm-6">
            <h1>Latest archived</h1>
            <table class="table table-condensed table-striped">
                <thead>
                    <tr>
                        <td>Replay ID</td>
                        <td>State</td>
                        <td>Time</td>
                    </tr>
                </thead>
                <tbody>
                    {% for replay in last_archived_replays %}
                        <tr>
                            <td><a href="{{ url_for("replays.replay", _id=replay.id) }}">{{ replay.id }}</a></td>
                            <td>{{ replay.state }}</td>
                            <td>{{ replay.dl_done_time|datetime_to_datestring }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
